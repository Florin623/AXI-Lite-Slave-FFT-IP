`timescale 1ns / 1ps

module FFT_8_Points_TB();

    reg               clk;
    reg               rst_n;
    reg signed [15:0] x0_r;
    reg signed [15:0] x0_i;
    reg signed [15:0] x1_r;
    reg signed [15:0] x1_i;
    reg signed [15:0] x2_r;
    reg signed [15:0] x2_i;
    reg signed [15:0] x3_r;
    reg signed [15:0] x3_i;
    reg signed [15:0] x4_r;
    reg signed [15:0] x4_i;
    reg signed [15:0] x5_r;
    reg signed [15:0] x5_i;
    reg signed [15:0] x6_r;
    reg signed [15:0] x6_i;
    reg signed [15:0] x7_r;
    reg signed [15:0] x7_i;

    wire signed [15:0] X0_r;
    wire signed [15:0] X0_i;
    wire signed [15:0] X1_r;
    wire signed [15:0] X1_i;
    wire signed [15:0] X2_r;
    wire signed [15:0] X2_i;
    wire signed [15:0] X3_r;
    wire signed [15:0] X3_i;
    wire signed [15:0] X4_r;
    wire signed [15:0] X4_i;
    wire signed [15:0] X5_r;
    wire signed [15:0] X5_i;
    wire signed [15:0] X6_r;
    wire signed [15:0] X6_i;
    wire signed [15:0] X7_r;
    wire signed [15:0] X7_i;

    FFT_8_Points DUT(
        .clk(clk),
        .rst_n(rst_n),
        .x0_r(x0_r),
        .x0_i(x0_i),
        .x1_r(x1_r),
        .x1_i(x1_i),
        .x2_r(x2_r),
        .x2_i(x2_i),
        .x3_r(x3_r),
        .x3_i(x3_i),
        .x4_r(x4_r),
        .x4_i(x4_i),
        .x5_r(x5_r),
        .x5_i(x5_i),
        .x6_r(x6_r),
        .x6_i(x6_i),
        .x7_r(x7_r),
        .x7_i(x7_i),
        .X0_r(X0_r),
        .X0_i(X0_i),
        .X1_r(X1_r),
        .X1_i(X1_i),
        .X2_r(X2_r),
        .X2_i(X2_i),
        .X3_r(X3_r),
        .X3_i(X3_i),
        .X4_r(X4_r),
        .X4_i(X4_i),
        .X5_r(X5_r),
        .X5_i(X5_i),
        .X6_r(X6_r),
        .X6_i(X6_i),
        .X7_r(X7_r),
        .X7_i(X7_i)
    );

    initial begin
        clk = 1'b0;
        forever #5 clk = ~clk;
    end

    initial begin
        rst_n = 1'b1;
        #7;
        rst_n = 1'b0;
        repeat(2) @(posedge clk);
        #3;
        rst_n = 1'b1;
        // x(n) = {0, 1, 2, 3, 4, 5, 6, 7}
        x0_r = 16'b00000000_00000000;   // 0.0
        x0_i = 16'b00000000_00000000;   // 0.0
        x1_r = 16'b00000001_00000000;   // 1.0
        x1_i = 16'b00000000_00000000;   // 0.0
        x2_r = 16'b00000010_00000000;   // 2.0
        x2_i = 16'b00000000_00000000;   // 0.0
        x3_r = 16'b00000011_00000000;   // 3.0
        x3_i = 16'b00000000_00000000;   // 0.0
        x4_r = 16'b00000100_00000000;   // 4.0
        x4_i = 16'b00000000_00000000;   // 0.0
        x5_r = 16'b00000101_00000000;   // 5.0
        x5_i = 16'b00000000_00000000;   // 0.0
        x6_r = 16'b00000110_00000000;   // 6.0
        x6_i = 16'b00000000_00000000;   // 0.0
        x7_r = 16'b00000111_00000000;   // 7.0
        x7_i = 16'b00000000_00000000;   // 0.0
        repeat(4) @(posedge clk);

        // x(n) = {4.56 + 3*j, 10.29 - 8*j, 7.77 - 5.4*j, 3.141 + 6.666*j, 0 - 7.89*j, 5.55 + 1.337*j, -18.12 - 14.87*j, -47.57 - 12.345*j}
        x0_r = 16'b00000100_10001111;   // 4.56
        x0_i = 16'b00000011_00000000;   // 3
        x1_r = 16'b00001010_01001010;   // 10.29
        x1_i = 16'b11111000_00000000;   // -8
        x2_r = 16'b00000111_11000101;   // 7.77
        x2_i = 16'b11111010_10011001;   // -5.4
        x3_r = 16'b00000011_00100100;   // 3.141
        x3_i = 16'b00000110_10101010;   // 6.666
        x4_r = 16'b00000000_00000000;   // 0
        x4_i = 16'b11111000_00011100;   // -7.89
        x5_r = 16'b00000101_10001100;   // 5.55
        x5_i = 16'b00000001_01010110;   // 1.337
        x6_r = 16'b11101101_11100001;   // -18.12
        x6_i = 16'b11110001_00100001;   // -14.87
        x7_r = 16'b11010000_01101110;   // -47.57
        x7_i = 16'b11110011_10100111;   // -12.345
        repeat(4) @(posedge clk);

        // x(n) = {-0.111 + 1.222*j, 2.333 - 3.444*j, 4.555 - 5.666*j, -6.777 + 7.888*j, 8.999 + 9.101*j, -10.112 - 11.223*j, 12.334 + 13.445*j, 14.556 + 15.667*j}
        x0_r = 16'b11111111_11100011;   // -0.111
        x0_i = 16'b00000001_00111000;   // 1.222
        x1_r = 16'b00000010_01010101;   // 2.333
        x1_i = 16'b11111100_10001110;   // -3.444
        x2_r = 16'b00000100_10001110;   // 4.555
        x2_i = 16'b11111010_01010101;   // -5.666
        x3_r = 16'b11111001_00111001;   // -6.777
        x3_i = 16'b00000111_11100011;   // 7.888
        x4_r = 16'b00001000_11111111;   // 8.999
        x4_i = 16'b00001001_00011001;   // 9.101
        x5_r = 16'b11110101_11100011;   // -10.112
        x5_i = 16'b11110100_11000110;   // -11.223
        x6_r = 16'b00001100_01010101;   // 12.334
        x6_i = 16'b00001101_01110001;   // 13.445
        x7_r = 16'b00001110_10001110;   // 14.556
        x7_i = 16'b00001111_10101010;   // 15.667
        repeat(4) @(posedge clk);

        // x(n) = {15.56 + 3*j, 12.29 - 8*j, 6.77 - 3.4*j, -3.14 + 6.66*j, 0 - 5.89*j, 1.55 + 3.337*j, -15.12 + 19.87*j, -36.57 - 11.345*j}
        x0_r = 16'b00001111_10001111;   // 15.56
        x0_i = 16'b00000011_00000000;   // 3
        x1_r = 16'b00001100_01001010;   // 12.29
        x1_i = 16'b11111000_10000000;   // -8
        x2_r = 16'b00000110_11000101;   // 6.77
        x2_i = 16'b11111100_10011001;   // -3.4
        x3_r = 16'b11111100_11011100;   // -3.14
        x3_i = 16'b00000110_10101000;   // 6.66
        x4_r = 16'b00000000_00000000;   // 0
        x4_i = 16'b11111010_00011100;   // -5.89
        x5_r = 16'b00000001_10001100;   // 1.55
        x5_i = 16'b00000011_01010110;   // 3.337
        x6_r = 16'b11110000_11100001;   // -15.12
        x6_i = 16'b00010011_11011110;   // 19.87
        x7_r = 16'b11011011_01101110;   // -36.57
        x7_i = 16'b11110100_10100111;   // -11.345
        repeat(4) @(posedge clk);

        $finish;
end

endmodule